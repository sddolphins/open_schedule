<script type="text/javascript">
  $(function() {
    // Add widget handler.
    $('.btn-widget').click(function(e) {
      e.preventDefault();
      var targetId = $(this).attr("id");
      if (targetId === "addDisplayOptionsWidget") {
        $('#displayOptionsBox').fadeIn();
      }
      else if (targetId === "addSchedulingPeriodWidget") {
        $('#schedulingPeriodBox').fadeIn();
      }
    });

    // Close widget handler.
    $('.btn-close').click(function(e) {
      e.preventDefault();
      $(this).parent().parent().parent().fadeOut();
    });

    // Widget minimize handler.
    $('.btn-minimize').click(function(e) {
      e.preventDefault();
      var $target = $(this).parent().parent().next('.box-content');
      if ($target.is(':visible'))
        $('i', $(this)).removeClass('icon-chevron-up').addClass('icon-chevron-down');
      else
        $('i', $(this)).removeClass('icon-chevron-down').addClass('icon-chevron-up');
      $target.slideToggle();
    });

    // Widget settings handler.
    $('.btn-setting').click(function(e) {
      e.preventDefault();
      var targetId = $(this).parent().parent().next('.box-content').attr("id");
      if (targetId === "displayOptions") {
        $('#myModal').modal('show');
      }
      else {
        alert("setting target id: " + targetId);
      }
    });

  });
</script>

<div id="widgetBox" class="box">
  <div class="box-header">
    <h2><i class="icon-plus"></i><span class="break"></span>Add Widget</h2>
    <div class="box-icon">
      <a href="#" class="btn-minimize"><i class="icon-chevron-down"></i></a>
    </div>
  </div>
  <div class="box-content widget_content" id="addWidget" style="display:none;">
    <div class="row-fluid">
      <div class="span11">
        <label>Display Options Widget</label>
      </div>
      <div class="span1">
        <a href="#" id="addDisplayOptionsWidget" class="btn-widget"><i class="icon-plus"></i></a>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span11">          
        <label>Scheduling Period Widget</label>
      </div>
      <div class="span1">
        <a href="#" id="addSchedulingPeriodWidget" class="btn-widget"><i class="icon-plus"></i></a>
      </div>
    </div>
  </div>
</div>

<div id="displayOptionsBox" class="box">
  #{displayOptionsWidget locations:_locations /}
</div>

<div id="schedulingPeriodBox" class="box">
  #{schedulingPeriodWidget /}
</div>
